<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon Studio - ApexPanel</title>
    <style>
        /* --- DEIN ORIGINAL SETUP --- */
        @import url('https://unpkg.com/normalize.css') layer(normalize);
        @layer normalize, base, demo, toggle, transitions, debug;

        @layer base {
            :root {
                --font-size-min: 16;
                --font-size-max: 20;
                --bg-darkness: 0;
            }
            body {
                background: url("https://media.istockphoto.com/id/1430511443/vector/christmas-mistletoe-foliage-and-berries-vector-seamless-pattern.jpg?s=612x612&w=0&k=20&c=oqxlH7ytgd5yjBQroACirJ1gH7Au1tq8gmsdeGd-Crk=") center center;
                background-size: 500px;
                min-height: 100vh;
                margin: 0;
                font-family: 'SF Pro Text', system-ui, sans-serif;
                animation: moveBackground 60s linear infinite;
                overflow: hidden;
            }
            /* Helligkeits-Overlay Effekt direkt im Body */
            body::after {
                content: '';
                position: fixed;
                inset: 0;
                background: black;
                opacity: var(--bg-darkness);
                pointer-events: none;
                z-index: 5;
                transition: opacity 0.4s ease;
            }
            @keyframes moveBackground {
                from { background-position: 0% 0%; }
                to { background-position: 0% -1500%; }
            }
        }

        /* POSITIONIERUNG OBEN LINKS */
        .main-ui-container {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 20; /* Über dem Helligkeits-Overlay */
        }

        /* --- LIQUID GLASS FRAMES (DEIN DESIGN) --- */
        .liquidGlass-wrapper {
            position: relative;
            width: 300px;
            border-radius: 1.5rem;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .liquidGlass-effect {
            position: absolute; inset: 0; z-index: 0;
            backdrop-filter: blur(8px);
            filter: url(#glass-distortion);
        }
        .liquidGlass-tint {
            position: absolute; inset: 0; z-index: 1;
            background: rgba(255, 255, 255, 0.1);
        }
        .liquidGlass-shine {
            position: absolute; inset: 0; z-index: 2;
            box-shadow: inset 1px 1px 1px rgba(255, 255, 255, 0.3),
                        inset -1px -1px 1px rgba(255, 255, 255, 0.1);
        }
        .content {
            position: relative; z-index: 3; padding: 20px; color: #000;
            display: flex; flex-direction: column; gap: 10px;
        }
        .label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1.2px; font-weight: 900; opacity: 0.6; }
        .value { font-size: 1rem; font-weight: 800; }

        /* --- DAS ORIGINAL TOGGLE SCRIPT CSS (UNVERÄNDERT) --- */
        @layer toggle {
            .liquid-toggle {
                --unchecked: hsl(218, 8%, 81%);
                --checked: hsl(var(--hue, 144), calc((8 + (var(--complete) / 100 * (92))) * 1%), calc((81 - (var(--complete) / 100 * (81 - 43))) * 1%));
                --border: 5px; --width: 120; --height: 50;
                height: calc(var(--height) * 1px); width: calc(var(--width) * 1px);
                border-radius: 100px; border: 0; padding: 0; cursor: pointer;
                position: relative; background: #0000; container-type: inline-size;
            }
            .indicator--masked {
                border-radius: 100px; height: 100%; width: 100%;
                background: var(--checked); position: absolute;
                top: 50%; left: 50%; translate: -50% -50%;
            }
            .indicator--masked .mask {
                position: absolute; height: calc(100% - (2 * var(--border)));
                width: calc(60% - (2 * var(--border))); top: 50%;
                background: #000; left: var(--border); border-radius: 100px;
            }
            .liquids {
                position: absolute; inset: 0; border-radius: 100px;
                overflow: hidden; filter: url(#goo);
            }
            .liquid__track {
                height: 100%; width: 200%;
                background: var(--checked); position: absolute; top: 50%;
            }
            .indicator__liquid {
                position: absolute; height: calc(100% - (2 * var(--border)));
                width: calc(60% - (2 * var(--border))); top: 50%;
                left: var(--border); border-radius: 100px;
            }
            .indicator__liquid .cover { position: absolute; inset: 0; background: white; border-radius: 100px; transition: opacity 0.2s; }
            [aria-pressed='true'] .cover { opacity: 0; }
        }

        @layer transitions {
            .indicator--masked .mask {
                translate: calc((var(--complete) / 100) * (100cqi - 60cqi)) -50%;
                transition: translate var(--transition, 0.2s) var(--ease, ease-out);
            }
            .liquid__track {
                translate: calc((var(--complete) / 100) * (100cqi - 100%)) -50%;
                transition: translate var(--transition, 0.2s) var(--ease, ease-out);
            }
            .indicator__liquid {
                translate: calc((var(--complete) / 100) * (100cqi - 100% - (2 * var(--border)))) -50%;
                transition: translate var(--transition, 0.2s) var(--ease, ease-out);
            }
        }
    </style>
</head>
<body>

    <div class="main-ui-container">
        <div class="liquidGlass-wrapper">
            <div class="liquidGlass-effect"></div><div class="liquidGlass-tint"></div><div class="liquidGlass-shine"></div>
            <div class="content">
                <div class="info-item"><span class="label">Product</span><span class="value">ApexPanel Pro</span></div>
                <div class="info-item"><span class="label">Version</span><span class="value">ApexOS 1</span></div>
                <div class="info-item"><span class="label">Product Cost</span><span class="value">100 Robux</span></div>
            </div>
        </div>

        <div class="liquidGlass-wrapper">
            <div class="liquidGlass-effect"></div><div class="liquidGlass-tint"></div><div class="liquidGlass-shine"></div>
            <div class="content">
                <span class="label">BRIGHTNESS:</span>
                <button id="brightnessToggle" aria-label="toggle" aria-pressed="false" class="liquid-toggle">
                    <div class="indicator--masked"><div class="mask"></div></div>
                    <div class="indicator__liquid">
                        <div class="liquids"><div class="liquid__track"></div></div>
                        <div class="cover"></div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <svg style="display: none">
        <defs>
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" />
            </filter>
            <filter id="glass-distortion">
                <feTurbulence baseFrequency="0.01" numOctaves="1" seed="5" />
                <feDisplacementMap in="SourceGraphic" scale="120" />
            </filter>
        </defs>
    </svg>

    <script src="https://cdn.skypack.dev/gsap@3.13.0"></script>
    <script src="https://cdn.skypack.dev/gsap@3.13.0/Draggable"></script>
    <script type="module">
        import { Pane } from 'https://cdn.skypack.dev/tweakpane@4.0.4';

        const toggle = document.getElementById('brightnessToggle');
        const config = { complete: 0, hue: 144, bounce: true };

        const update = () => {
            toggle.style.setProperty('--complete', config.complete);
            toggle.style.setProperty('--hue', config.hue);
            // Die Logik: Hintergrund abdunkeln basierend auf Toggle-Status
            document.body.style.setProperty('--bg-darkness', (config.complete / 100) * 0.75);
        };

        // Das Click-Event mit deiner elastic Logik
        toggle.addEventListener('click', () => {
            const isPressed = toggle.getAttribute('aria-pressed') === 'true';
            gsap.to(config, {
                complete: isPressed ? 0 : 100,
                duration: 0.8,
                ease: config.bounce ? "elastic.out(1, 0.4)" : "power2.out",
                onUpdate: update,
                onComplete: () => {
                    toggle.setAttribute('aria-pressed', !isPressed);
                }
            });
        });

        // Tweakpane Integration (oben rechts wie im Bild)
        const ctrl = new Pane({ title: 'config', expanded: true });
        ctrl.addBinding(config, 'complete', { min: 0, max: 100 }).on('change', update);
        ctrl.addBinding(config, 'hue', { min: 0, max: 359 }).on('change', update);
        ctrl.addBinding(config, 'bounce');

        // Draggable Integration (Optional aber im Script enthalten)
        gsap.registerPlugin(Draggable);
        const proxy = document.createElement('div');
        Draggable.create(proxy, {
            trigger: toggle,
            type: 'x',
            onDrag: function() {
                let c = Math.max(0, Math.min(100, (this.x / 50) * 100));
                config.complete = c;
                update();
            },
            onDragEnd: function() {
                config.complete = config.complete > 50 ? 100 : 0;
                toggle.setAttribute('aria-pressed', config.complete === 100);
                update();
            }
        });

        update();
    </script>
</body>
</html>
